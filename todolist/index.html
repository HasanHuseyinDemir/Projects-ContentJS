{%activeApp="Yapılacaklar Listesi",document.title="Yapılacaklar Listesi";""%}

<script>

    //list
    __list=[];
    __filter="all";
    __getIncompleted=()=>{
        return __list.length-__listUpdate.getCompleted();
    }
    __listUpdate = {
        get: () => {
            let title = document.querySelector("#__title");
            let details = document.querySelector("#__details");
            let importance = document.querySelector("#__importances");
            let titleValue = title.value;
            let detailsValue = details.value;
            let importanceValue = importance.value;
            __listUpdate.add(titleValue, detailsValue, importanceValue);
            __listUpdate.clear(title, details, importance);
        },
        add: (titleValue, detailsValue, importanceValue) => {
            if (titleValue) {
                let item = { key: Math.floor(Math.random() * 1000000), title: titleValue, details: detailsValue, importance: importanceValue,completed:false };
                __list.push(item);
            } else {
                alert("Başlık Girmelisiniz!");
            }
        },
        clear: (title, details, importance) => {
            title.value = "";
            details.value = "";
            importance.value = 0;
            set();
        },
        getList: () => {
            if(__list[0]){
                return __list.map((item) => {
                return (`
                <div id="__importance${item.importance}">
                <input type="checkbox" class="__checkbox" onclick="__listUpdate.checked(${item.key})" ${item.completed?"checked":""}>
                <div>
                <h3 class="${item.completed?'__checkedItem':''}">${item.title}</h3>
                <p class="${item.completed?'__checkedItem':''}">${item.details}</p>
                </div>
                </div>
                `)
            }).join("");
        }else{
            return `Liste Boş`
        }
        },
        checked:(key)=>{
            let keys=key;
            __list.map((objs)=>{
                if(objs.key.toString()==key.toString()){
                    objs.completed=!objs.completed;
                }
            })
            set();
        },
        getCompleted:()=>{
            let completed=0;
            __list.map((item)=>{
                item.completed?completed++:"";
            })
            return completed;
        },
        filter:{
            get:(condition)=>{
                let list = __list;
                switch(condition){
                    case "impAscend":__listUpdate.filter.importanceAscend(list);break;
                    case "impDescend":__listUpdate.filter.importanceAscend();break;
                    case "completed":__listUpdate.filter.importanceAscend();break;
                    case "incompleted":__listUpdate.filter.importanceAscend();break;
                }
            },
            importanceAscend:(list)=>{
                let Arr0=[];
                list.map((item)=>{
                    if(item.importance==0){
                        Arr.push(item);
                    }
                })
            },
            importanceDescend:()=>{

            },
            completed:()=>{

            },
            incompleted:()=>{

            }
        }
    }


</script>

    <div id="__row">
    
    <div id="__grid">
    <Menu/>
    <TodoList/>
    </div>
    <Footer/>

    </div>

    {%cRender("./todolist/menu.html","menu","#key"),""%}
    {%cRender("./todolist/todolist.html","todolist","#key"),""%}
    {%cRender("./todolist/footer.html","footer","#key"),""%}


<style>
    #__grid{
        background-color: rgb(223, 223, 223);
        border:solid;
        width: 70vw;
        height: 70vh;
        overflow-y: auto;
        padding: 3vh;
        display: grid;
        grid-template-columns: 40% 60%;
    }
    #__grid>*{  
        height: 90%;
        word-wrap: break-word;
    }
    #__row{
        display:flex;
        flex-direction: column;
    }
    /**/
    menu,todolist{
        padding: 4vh;
    }


</style>